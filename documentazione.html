<!-- Documentazione Content -->
<style>
    .toc {
        position: sticky;
        top: 20px;
    }

    .feature-card {
        transition: transform 0.2s;
    }

    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    }

    .tech-badge {
        font-size: 0.85rem;
        padding: 0.35em 0.65em;
        margin: 0.2rem;
    }

    pre code {
        background-color: #f8f9fa;
        padding: 1rem;
        border-radius: 0.375rem;
        display: block;
    }

    .section-header {
        border-bottom: 1px solid gray;
        padding-bottom: 0.5rem;
        margin-bottom: 1.5rem;
    }
</style>

<!-- Hero Section -->
<div class="py-5"
    style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-bottom: 3px solid #dee2e6;">
    <div class="container">
        <h1 class="display-4" style="color: #2c3e50;">Documentazione POC</h1>
        <p class="lead" style="color: #495057;">ASSE InCiSo - Sistema di gestione assistiti e prestazioni
            assistenziali</p>
        <p class="mb-0"><span class="badge"
                style="background-color: #6c757d; color: white; font-size: 1rem; padding: 0.5rem 1rem;">Versione
                1.0.0 - Proof of Concept</span></p>
    </div>
</div>

<div class="container my-5">
        <div class="row">
            <!-- Table of Contents -->
            <div class="col-lg-3">
                <div class="toc">
                    <h5 class="mb-3">Indice</h5>
                    <nav class="nav flex-column">
                        <a class="nav-link" href="#overview">Panoramica</a>
                        <a class="nav-link" href="#dashboard">1. Dashboard</a>
                        <a class="nav-link" href="#ricerca">2. Ricerca Assistiti</a>
                        <a class="nav-link" href="#dettaglio">3. Fascicolo Personale</a>
                        <a class="nav-link" href="#documenti">4. Documenti</a>
                        <a class="nav-link" href="#editor">5. Configurazione</a>
                        <a class="nav-link" href="#architettura">Architettura</a>
                        <a class="nav-link" href="#dati">Modello Dati</a>
                    </nav>
                </div>
            </div>

            <!-- Content -->
            <div class="col-lg-9">
                <!-- Panoramica -->
                <section id="overview" class="mb-5">
                    <h2 class="section-header">Panoramica Generale</h2>
                    <div class="alert alert-info">
                        <strong>Obiettivo:</strong> Proof of Concept per il sistema ASSE InCiSo di gestione
                        assistiti, evidenze/promemoria, prestazioni assistenziali e comunicazioni protocollate.
                    </div>

                    <h4 class="mt-4">Stack Tecnologico</h4>
                    <div>
                        <span class="badge tech-badge bg-primary">HTML5</span>
                        <span class="badge tech-badge bg-primary">CSS3</span>
                        <span class="badge tech-badge bg-warning text-dark">JavaScript ES6+</span>
                        <span class="badge tech-badge bg-info">Bootstrap 5.3</span>
                        <span class="badge tech-badge bg-success">Bootstrap Icons 1.11</span>
                        <span class="badge tech-badge bg-secondary">JSON Data</span>
                    </div>

                    <h4 class="mt-4">Statistiche Progetto</h4>
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h3 class="text-primary">7</h3>
                                    <small>Pagine HTML</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h3 class="text-success">9</h3>
                                    <small>Moduli JavaScript</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h3 class="text-info">9</h3>
                                    <small>File Dati JSON</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h3 class="text-warning">~5.600</h3>
                                    <small>Righe di Codice</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="alert alert-success border mt-3">
                        <i class="bi bi-stars"></i> <strong>Architettura SPA:</strong> Single Page Application con caricamento dinamico dei contenuti<br>
                        <small>
                            <strong>Totale file:</strong> 1 index.html + 6 pagine contenuto + 2 componenti + 9 JS + 2 CSS + 9 JSON = <strong>29 file</strong><br>
                            <strong>Novità:</strong> Sistema di navigazione SPA con caricamento dinamico pagine e script + Gestione Verbali SABES/ASDAA
                        </small>
                    </div>
                </section>

                <section id="dashboard" class="mb-5">
                    <h2 class="section-header">Logo</h2>
                    <div class="row">
                        <div class="col-3">
                            <img src="assets/images/img-logo.png" alt="Logo"/>
                        </div>
                        <div class="col-3 ml-2">
                            <img src="assets/images/img-logo-negativo.png" alt="Logo in negativo"/>
                        </div>
                    </div>
                </section>

                <!-- Dashboard -->
                <section id="dashboard" class="mb-5">
                    <h2 class="section-header">1. Dashboard</h2>
                    <p class="lead">Pagina principale con vista evidenze/promemoria, note operative e verbali SABES/ASDAA</p>

                    <div class="card feature-card mb-3">
                        <div class="card-header bg-warning text-dark">
                            <h5 class="mb-0"><i class="bi bi-exclamation-triangle"></i> Evidenze / Promemoria</h5>
                        </div>
                        <div class="card-body">
                            <h6>Funzionalità:</h6>
                            <ul>
                                <li><strong>Layout a 2 colonne</strong> (70% evidenze / 30% note)</li>
                                <li><strong>Visualizzazione Tabella/Card:</strong> Toggle per cambiare tra vista tabellare e card per evidenze</li>
                                <li><strong>3 Tab dinamici:</strong>
                                    <ul>
                                        <li>Scadute (data scadenza < oggi)</li>
                                        <li>Correnti (scadenza entro 30 giorni)</li>
                                        <li>Future (scadenza oltre 30 giorni)</li>
                                    </ul>
                                </li>
                                <li><strong>Filtri multipli:</strong>
                                    <ul>
                                        <li>Ricerca testuale (nome/CF assistito)</li>
                                        <li>Filtro per categoria (ID numerico)</li>
                                        <li>Filtro per tipo evidenza (descrizione)</li>
                                    </ul>
                                </li>
                                <li><strong>Badge contatori</strong> per ogni tab (aggiornati in tempo reale)</li>
                                <li><strong>Card evidenza</strong> con:
                                    <ul>
                                        <li>Bordo colorato per priorità</li>
                                        <li>Badge categoria e giorni rimanenti</li>
                                        <li>Pulsante dettagli (modal)</li>
                                    </ul>
                                </li>
                                <li><strong>Esportazione CSV</strong> delle evidenze filtrate</li>
                            </ul>

                            <h6 class="mt-3">File coinvolti:</h6>
                            <code>dashboard.html, js/app.js, js/evidenze.js, js/utils.js, data/evidenze.json, data/tipo_evidenze.json</code>
                        </div>
                    </div>

                    <div class="card feature-card mb-3">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0"><i class="bi bi-sticky"></i> Note Operative</h5>
                        </div>
                        <div class="card-body">
                            <h6>Funzionalità:</h6>
                            <ul>
                                <li><strong>Visualizzazione Tabella/Card:</strong> Toggle per cambiare modalità di visualizzazione</li>
                                <li><strong>Filtro per categoria:</strong> Residenza, Pagamenti, Degenze,
                                    Amministrazione Sostegno, Redditi, Varie</li>
                                <li><strong>Badge colorati vivaci</strong> per categorie con colori ad alto contrasto</li>
                                <li><strong>Ricerca testuale</strong> su titolo, testo, assistito, operatore</li>
                                <li><strong>Esportazione CSV</strong> delle note filtrate</li>
                                <li><strong>Card nota</strong> con:
                                    <ul>
                                        <li>Badge categoria colorato</li>
                                        <li>Icona stella per note principali</li>
                                        <li>Data/ora creazione</li>
                                        <li>Operatore</li>
                                    </ul>
                                </li>
                                <li><strong>Modal creazione nuova nota</strong> con form completo</li>
                                <li><strong>Modal dettagli nota</strong> per visualizzazione completa</li>
                                <li><strong>Ordinamento</strong> per data creazione (più recenti prime)</li>
                            </ul>

                            <h6 class="mt-3">File coinvolti:</h6>
                            <code>dashboard.html, js/app.js, data/note.json</code>
                        </div>
                    </div>

                    <div class="card feature-card mb-3">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0"><i class="bi bi-file-earmark-medical"></i> Nuovi Verbali SABES/ASDAA</h5>
                        </div>
                        <div class="card-body">
                            <h6>Funzionalità:</h6>
                            <ul>
                                <li><strong>Tabella verbali</strong> con colonne:
                                    <ul>
                                        <li>Codice Fiscale</li>
                                        <li>Cognome e Nome</li>
                                        <li>Data Nascita</li>
                                        <li>% Invalidità Civile, Cecità, Sordità (3 colonne separate)</li>
                                        <li>Stato Prestazione (badge colorato: Verde=Concessa, Giallo=Sospesa, Rosso=Revocata)</li>
                                    </ul>
                                </li>
                                <li><strong>Bottoni azione:</strong> Ricevibile (verde) e Irricevibile (rosso) per ogni verbale</li>
                                <li><strong>Click sulla riga:</strong> Visualizza dettaglio verbale completo</li>
                                <li><strong>Filtri:</strong> Ricerca per CF/protocollo, filtro per % invalidità, filtro per stato</li>
                                <li><strong>Esportazione CSV</strong> completa di tutti i verbali</li>
                                <li><strong>Contatore totale</strong> verbali presenti</li>
                                <li><strong>Caricamento automatico</strong> con spinner che si ferma dopo il caricamento</li>
                            </ul>

                            <h6 class="mt-3">File coinvolti:</h6>
                            <code>dashboard.html, js/verbali-sabes.js, data/verbali_sabes.json</code>
                        </div>
                    </div>
                </section>

                <!-- Ricerca -->
                <section id="ricerca" class="mb-5">
                    <h2 class="section-header">2. Ricerca Assistiti</h2>
                    <p class="lead">Form ricerca multi-criterio con risultati paginati</p>

                    <div class="card feature-card mb-3">
                        <div class="card-body">
                            <h6>Funzionalità:</h6>
                            <ul>
                                <li><strong>Badge tipologia invalidità:</strong> Filtri checkbox colorati per Invalidità Civile, Cecità, Sordità</li>
                                <li><strong>Form ricerca con 10 criteri:</strong>
                                    <ul>
                                        <li>Codice Fiscale (16 caratteri)</li>
                                        <li>Cognome (ricerca parziale)</li>
                                        <li>Nome (ricerca parziale)</li>
                                        <li>Data Nascita (esatta)</li>
                                        <li>Data Decesso</li>
                                        <li>Tipo Rappresentante Legale</li>
                                        <li>Rappresentante Legale (nome)</li>
                                        <li>% Invalidità Civile (range)</li>
                                        <li>% Cecità (range)</li>
                                        <li>% Sordità (range)</li>
                                    </ul>
                                </li>
                                <li><strong>Tabella risultati:</strong>
                                    <ul>
                                        <li><strong>11 colonne:</strong> Tipo Invalidità (badge), CF, Cognome, Nome, Data Nascita, Tipo R.L, Rapp. Legale, %INV, %Cecità, %Sordità, Azioni</li>
                                        <li><strong>Colorazione righe:</strong> Sfondo tenue nel colore del badge di invalidità con bordo laterale colorato</li>
                                        <li><strong>Badge colorati vivaci:</strong> Blu per Inv. Civile, Arancione per Cecità, Azzurro per Sordità</li>
                                        <li><strong>Percentuali integrate</strong> dai verbali JSON attivi</li>
                                    </ul>
                                </li>
                                <li><strong>Visualizzazione tutti gli assistiti:</strong> Al caricamento o senza filtri, mostra tutti gli assistiti disponibili</li>
                                <li><strong>Paginazione:</strong> 50 elementi per pagina con navigazione completa</li>
                                <li><strong>Esportazione CSV</strong> risultati completi</li>
                                <li><strong>Normalizzazione ricerca:</strong> rimozione accenti, lowercase</li>
                                <li><strong>Badge contatore</strong> risultati trovati</li>
                                <li><strong>Link diretto</strong> al fascicolo personale da ogni risultato</li>
                                <li><strong>Reset filtri</strong> completo</li>
                            </ul>

                            <h6 class="mt-3">Algoritmo ricerca:</h6>
                            <pre><code>risultati = assistiti.filter(assistito => {
    // Applicazione filtri AND su tutti i criteri compilati
    // Ricerca parziale con normalizzazione stringhe
    // Case-insensitive e senza accenti
});</code></pre>

                            <h6 class="mt-3">File coinvolti:</h6>
                            <code>ricerca.html, js/ricerca.js, data/assistiti.json</code>
                        </div>
                    </div>
                </section>

                <!-- Dettaglio -->
                <section id="dettaglio" class="mb-5">
                    <h2 class="section-header">3. Fascicolo Personale</h2>
                    <p class="lead">Vista completa assistito con 7 tab specializzati</p>

                    <div class="alert alert-warning">
                        <strong>Accesso:</strong> Parametro URL <code>?cf=RSSMRA80A01H501U</code>
                    </div>

                    <div class="card feature-card mb-3">
                        <div class="card-header">
                            <h5 class="mb-0">Header Assistito</h5>
                        </div>
                        <div class="card-body">
                            <ul>
                                <li><strong>Design:</strong> Gradient viola con testo bianco</li>
                                <li><strong>Dati visualizzati:</strong>
                                    <ul>
                                        <li>Cognome Nome (h2)</li>
                                        <li>Codice Fiscale</li>
                                        <li>Data e luogo nascita</li>
                                        <li>Indirizzo residenza completo</li>
                                        <li>Badge stato (Attivo/Sospeso)</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="accordion" id="tabsAccordion">
                        <!-- Tab 1: Riepilogo -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#tab1">
                                    Tab 1: Riepilogo
                                </button>
                            </h2>
                            <div id="tab1" class="accordion-collapse collapse show" data-bs-parent="#tabsAccordion">
                                <div class="accordion-body">
                                    <strong>Contenuto:</strong>
                                    <ul>
                                        <li><strong>Dati Anagrafici (card):</strong> tutti i campi anagrafica completi
                                        </li>
                                        <li><strong>Statistiche (4 card):</strong>
                                            <ul>
                                                <li>Prestazioni Attive (verde)</li>
                                                <li>Evidenze Scadute (rosso)</li>
                                                <li>Evidenze Correnti (giallo)</li>
                                                <li>Verbali Attivi (info)</li>
                                            </ul>
                                        </li>
                                        <li><strong>Evidenze Recenti:</strong> ultime 5 evidenze inserite</li>
                                    </ul>
                                    <strong>File:</strong> <code>js/dettaglio.js → loadTabRiepilogo()</code>
                                </div>
                            </div>
                        </div>

                        <!-- Tab 2: Prestazioni -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#tab2">
                                    Tab 2: Prestazioni
                                </button>
                            </h2>
                            <div id="tab2" class="accordion-collapse collapse" data-bs-parent="#tabsAccordion">
                                <div class="accordion-body">
                                    <strong>Contenuto:</strong>
                                    <ul>
                                        <li><strong>Card prestazione</strong> con bordo colorato per stato</li>
                                        <li><strong>Dati visualizzati:</strong> tipo, codice, decorrenza, scadenza,
                                            importo mensile</li>
                                        <li><strong>Griglia mensilità:</strong> visualizzazione mesi con stati
                                            <ul>
                                                <li>Pagato (verde)</li>
                                                <li>Sospeso (giallo)</li>
                                                <li>Negato/Revocato (rosso)</li>
                                                <li>Non dovuto (grigio)</li>
                                            </ul>
                                        </li>
                                        <li><strong>Responsive:</strong> griglia adattiva mobile (3 colonne)</li>
                                    </ul>
                                    <strong>File:</strong>
                                    <code>js/dettaglio.js → loadTabPrestazioni(), data/prestazioni.json</code>
                                </div>
                            </div>
                        </div>

                        <!-- Tab 3: Verbali -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#tab3">
                                    Tab 3: Verbali
                                </button>
                            </h2>
                            <div id="tab3" class="accordion-collapse collapse" data-bs-parent="#tabsAccordion">
                                <div class="accordion-body">
                                    <strong>Contenuto:</strong>
                                    <ul>
                                        <li><strong>Timeline verticale</strong> con linea connettore</li>
                                        <li><strong>Pallino colorato:</strong>
                                            <ul>
                                                <li>Verde = Attivo</li>
                                                <li>Grigio = Superato</li>
                                            </ul>
                                        </li>
                                        <li><strong>Tipi verbale:</strong> Invalidità Civile, Handicap L.104</li>
                                        <li><strong>Dati:</strong> numero, data emissione, scadenza, percentuale,
                                            commissione, esito</li>
                                        <li><strong>Ordinamento:</strong> più recenti primi</li>
                                        <li><strong>Opacità ridotta</strong> per verbali superati</li>
                                    </ul>
                                    <strong>File:</strong>
                                    <code>js/dettaglio.js → loadTabVerbali(), data/verbali.json</code>
                                </div>
                            </div>
                        </div>

                        <!-- Tab 4: Comunicazioni -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#tab4">
                                    Tab 4: Comunicazioni
                                </button>
                            </h2>
                            <div id="tab4" class="accordion-collapse collapse" data-bs-parent="#tabsAccordion">
                                <div class="accordion-body">
                                    <strong>Contenuto:</strong>
                                    <ul>
                                        <li><strong>Tabella 8 colonne:</strong> Tipo, Oggetto, Data Gen., Data Invio,
                                            Protocollo, Canale, Stato, Azioni</li>
                                        <li><strong>Badge stati:</strong>
                                            <ul>
                                                <li>Generata (grigio)</li>
                                                <li>Caricata (blu)</li>
                                                <li>Protocollata (verde)</li>
                                                <li>Errore (rosso)</li>
                                            </ul>
                                        </li>
                                        <li><strong>Pulsante visualizza</strong> con dettagli completi</li>
                                        <li><strong>Ordinamento:</strong> data generazione DESC</li>
                                    </ul>
                                    <strong>File:</strong>
                                    <code>js/dettaglio.js → loadTabComunicazioni(), data/comunicazioni.json</code>
                                </div>
                            </div>
                        </div>

                        <!-- Tab 5: Evidenze -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#tab5">
                                    Tab 5: Evidenze
                                </button>
                            </h2>
                            <div id="tab5" class="accordion-collapse collapse" data-bs-parent="#tabsAccordion">
                                <div class="accordion-body">
                                    <strong>Contenuto:</strong>
                                    <ul>
                                        <li><strong>Card evidenza</strong> con bordo colorato per priorità</li>
                                        <li><strong>Calcolo giorni rimanenti dinamico:</strong>
                                            <ul>
                                                <li>"Scaduta da X giorni" (rosso)</li>
                                                <li>"Scade oggi" (rosso)</li>
                                                <li>"Scade tra X giorni" (giallo se ≤7, info se >7)</li>
                                            </ul>
                                        </li>
                                        <li><strong>Badge:</strong> categoria, priorità, giorni</li>
                                        <li><strong>Ordinamento:</strong> data scadenza ASC (prima le più urgenti)</li>
                                    </ul>
                                    <strong>File:</strong> <code>js/dettaglio.js → loadTabEvidenze()</code>
                                </div>
                            </div>
                        </div>

                        <!-- Tab 6: Note -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#tab6">
                                    Tab 6: Note
                                </button>
                            </h2>
                            <div id="tab6" class="accordion-collapse collapse" data-bs-parent="#tabsAccordion">
                                <div class="accordion-body">
                                    <strong>Contenuto:</strong>
                                    <ul>
                                        <li><strong>Card nota</strong> con badge categoria colorato</li>
                                        <li><strong>Highlight note principali:</strong> bordo giallo e stella</li>
                                        <li><strong>Data/ora formattata</strong> DD/MM/YYYY HH:MM</li>
                                        <li><strong>Operatore</strong> con icona persona</li>
                                        <li><strong>Ordinamento:</strong> data creazione DESC</li>
                                    </ul>
                                    <strong>File:</strong> <code>js/dettaglio.js → loadTabNote()</code>
                                </div>
                            </div>
                        </div>

                        <!-- Tab 7: Log -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#tab7">
                                    Tab 7: Log Attività
                                </button>
                            </h2>
                            <div id="tab7" class="accordion-collapse collapse" data-bs-parent="#tabsAccordion">
                                <div class="accordion-body">
                                    <strong>Contenuto:</strong>
                                    <ul>
                                        <li><strong>Tabella log</strong> con 4 colonne: Data/Ora, Operatore, Operazione,
                                            Descrizione</li>
                                        <li><strong>Operazione:</strong> in formato monospace (MODIFICA_ANAGRAFICA,
                                            INSERIMENTO_NOTA, ecc.)</li>
                                        <li><strong>Dati:</strong> mock simulati per demo</li>
                                        <li><strong>Ordinamento:</strong> cronologico inverso</li>
                                    </ul>
                                    <strong>File:</strong> <code>js/dettaglio.js → loadTabLog()</code>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-success mt-3">
                        <strong>Caricamento Lazy:</strong> Ogni tab viene caricato solo quando viene selezionato
                        per la prima volta (flag <code>tabsLoaded</code>)
                    </div>

                    <h6 class="mt-3">File coinvolti:</h6>
                    <code>dettaglio.html, js/dettaglio.js (566 righe), 6 file JSON</code>
                </section>

                <!-- Documenti -->
                <section id="documenti" class="mb-5">
                    <h2 class="section-header">4. Documenti Protocollati</h2>
                    <p class="lead">Ricerca comunicazioni protocollate con dashboard statistiche</p>

                    <div class="card feature-card mb-3">
                        <div class="card-body">
                            <h6>Dashboard Statistiche (4 card):</h6>
                            <ul>
                                <li><strong>Totale Documenti</strong> (info)</li>
                                <li><strong>Protocollate</strong> (verde)</li>
                                <li><strong>In Lavorazione</strong> (giallo) - somma Generata + Caricata</li>
                                <li><strong>Con Errori</strong> (rosso)</li>
                            </ul>

                            <h6 class="mt-3">Form Ricerca (8 criteri):</h6>
                            <ul>
                                <li>Numero Protocollo</li>
                                <li>Codice Fiscale</li>
                                <li>Tipo Comunicazione (select dinamico)</li>
                                <li>Stato (Generata/Caricata/Protocollata/Errore)</li>
                                <li>Data Generazione Da/A (range)</li>
                                <li>Canale (PEC/Email/Raccomandata)</li>
                                <li>Operatore</li>
                            </ul>

                            <h6 class="mt-3">Risultati:</h6>
                            <ul>
                                <li><strong>Tabella 10 colonne</strong> con ordinamento data generazione DESC</li>
                                <li><strong>Paginazione:</strong> 15 elementi per pagina</li>
                                <li><strong>Badge stati colorati</strong> (protocollata/caricata/errore/generata)</li>
                                <li><strong>Modal dettaglio documento</strong> con tutti i dati</li>
                                <li><strong>Pulsanti azioni:</strong> Visualizza, Scarica (se protocollata)</li>
                                <li><strong>Esportazione CSV completa</strong></li>
                            </ul>

                            <h6 class="mt-3">File coinvolti:</h6>
                            <code>documenti.html, js/documenti.js (449 righe), data/comunicazioni.json, data/tipo_comunicazioni.json</code>
                        </div>
                    </div>
                </section>

                <!-- Editor -->
                <section id="editor" class="mb-5">
                    <h2 class="section-header">5. Configurazione / Editor</h2>
                    <p class="lead">Gestione template, regole evidenze, categorie e parametri sistema</p>

                    <div class="card feature-card mb-3">
                        <div class="card-header">
                            <h5 class="mb-0">4 Sezioni Configurazione</h5>
                        </div>
                        <div class="card-body">
                            <h6>1. Template Comunicazioni:</h6>
                            <ul>
                                <li><strong>Tabella template</strong> con 11 tipi caricati da JSON</li>
                                <li><strong>Colonne:</strong> Codice, Descrizione, File Template, Canale, Stato</li>
                                <li><strong>Azioni:</strong> Modifica, Scarica, Anteprima (placeholder)</li>
                            </ul>

                            <h6 class="mt-3">2. Regole Evidenze:</h6>
                            <ul>
                                <li><strong>Regole automatiche</strong> per creazione evidenze su eventi</li>
                                <li><strong>3 regole esempio:</strong>
                                    <ul>
                                        <li>Scadenza Permesso Soggiorno (60gg anticipo)</li>
                                        <li>Revisione Verbale Invalidità (60gg anticipo)</li>
                                        <li>Rinnovo Prestazione Annuale (90gg anticipo)</li>
                                    </ul>
                                </li>
                                <li><strong>Configurabili:</strong> Nome, Tipo, Trigger, Giorni, Attiva/Disattiva</li>
                            </ul>

                            <h6 class="mt-3">3. Categorie:</h6>
                            <ul>
                                <li><strong>Tipi Evidenza:</strong> lista 9 categorie con icone e colori</li>
                                <li><strong>Categorie Note:</strong> 5 categorie con descrizioni</li>
                                <li><strong>Modificabili</strong> (placeholder)</li>
                            </ul>

                            <h6 class="mt-3">4. Parametri Sistema:</h6>
                            <ul>
                                <li><strong>Evidenze:</strong> soglie giorni Scaduta (0) e Corrente (30)</li>
                                <li><strong>Notifiche:</strong> switch Email/Push</li>
                                <li><strong>Protocollo:</strong> URL EProcs, Timeout</li>
                                <li><strong>Sistema:</strong> Versione (1.0.0 POC), Ambiente (Dev/Test/Prod)</li>
                            </ul>

                            <h6 class="mt-3">File coinvolti:</h6>
                            <code>editor.html, js/editor.js (161 righe)</code>
                        </div>
                    </div>
                </section>

                <!-- Architettura -->
                <section id="architettura" class="mb-5">
                    <h2 class="section-header">Architettura Tecnica</h2>

                    <h4>Struttura File</h4>
                    <pre><code>POC/
├── index.html              (Shell SPA - container principale)
├── dashboard.html          (Contenuto dashboard)
├── ricerca.html            (Contenuto ricerca assistiti)
├── dettaglio.html          (Contenuto fascicolo 7 tab)
├── documenti.html          (Contenuto documenti protocollati)
├── editor.html             (Contenuto configurazione)
├── documentazione.html     (Contenuto questa pagina)
├── includes/
│   ├── header.html         (52 righe - navbar con link SPA)
│   └── footer.html         (42 righe - footer riutilizzabile)
├── css/
│   ├── style.css           (307 righe - stili globali)
│   └── components.css      (447 righe - componenti)
├── js/
│   ├── layout.js           (266 righe - SPA router e loader)
│   ├── utils.js            (356 righe - utility functions)
│   ├── evidenze.js         (380 righe - gestione evidenze + tabella/card)
│   ├── app.js              (640 righe - dashboard logic + note tabella/card)
│   ├── ricerca.js          (495 righe - ricerca assistiti avanzata)
│   ├── dettaglio.js        (566 righe - fascicolo 7 tab)
│   ├── documenti.js        (449 righe - doc protocollati)
│   ├── editor.js           (161 righe - configurazione)
│   └── verbali-sabes.js    (266 righe - gestione verbali SABES/ASDAA)
└── data/
    ├── tipo_evidenze.json       (9 tipologie)
    ├── tipo_comunicazioni.json  (11 tipologie)
    ├── assistiti.json           (5 campione)
    ├── evidenze.json            (12 evidenze)
    ├── note.json                (14 note - aggiornate con nuove categorie)
    ├── prestazioni.json         (6 con mensilità)
    ├── verbali.json             (8 verbali)
    ├── verbali_sabes.json       (8 verbali SABES/ASDAA)
    └── comunicazioni.json       (11 comunicazioni)</code></pre>

                    <h4 class="mt-4">Pattern Architetturali</h4>
                    <ul>
                        <li><strong>Single Page Application (SPA):</strong> Navigazione senza ricaricamento pagina completa</li>
                        <li><strong>Module Pattern:</strong> Ogni pagina ha un oggetto principale (App, RicercaApp,
                            DettaglioApp, ecc.)</li>
                        <li><strong>Component-Based Layout:</strong> Header e footer centralizzati in
                            <code>includes/</code> e caricati dinamicamente
                        </li>
                        <li><strong>Dynamic Content Loading:</strong> HTML e JS caricati on-demand tramite fetch()</li>
                        <li><strong>Lazy Loading:</strong> Tab e script caricati solo quando necessario</li>
                        <li><strong>Separation of Concerns:</strong> utils.js per funzioni generiche, moduli
                            specializzati per logica specifica</li>
                        <li><strong>Event-Driven:</strong> Event listeners centralizzati in
                            <code>setupEventListeners()</code>
                        </li>
                        <li><strong>Data-First:</strong> Fetch JSON → Elaborazione → Rendering</li>
                    </ul>

                    <h4 class="mt-4">Architettura SPA (Single Page Application)</h4>
                    <div class="alert alert-info">
                        <i class="bi bi-lightning-charge"></i> <strong>Vantaggi SPA:</strong> Navigazione fluida senza ricaricamento pagina, header/footer persistenti, 
                        caricamento ottimizzato degli script, esperienza utente migliorata.
                    </div>
                    
                    <h5>Componenti Principali</h5>
                    <ul>
                        <li><strong>index.html:</strong> Shell principale dell'applicazione
                            <ul>
                                <li>Contiene solo header, footer e <code>#content-container</code></li>
                                <li>Carica il minimo indispensabile di script (layout.js)</li>
                                <li>Punto di ingresso unico dell'applicazione</li>
                            </ul>
                        </li>
                        <li><strong>Pagine contenuto:</strong> HTML puro senza tag &lt;html&gt;, &lt;head&gt;, &lt;body&gt;
                            <ul>
                                <li>dashboard.html, ricerca.html, dettaglio.html, ecc.</li>
                                <li>Contengono solo il markup del contenuto specifico</li>
                                <li>Caricati dinamicamente nel <code>#content-container</code></li>
                            </ul>
                        </li>
                        <li><strong>includes/header.html:</strong> Navbar con link SPA (href="#")
                            <ul>
                                <li>5 voci menu principali + dropdown utente</li>
                                <li>Attributo <code>data-page</code> per identificare la destinazione</li>
                                <li>Click intercettati da JavaScript per navigazione SPA</li>
                            </ul>
                        </li>
                        <li><strong>includes/footer.html:</strong> Footer a 3 colonne con info progetto</li>
                    </ul>

                    <h5 class="mt-3">LayoutManager (js/layout.js)</h5>
                    <p>Cuore della navigazione SPA con le seguenti funzionalità:</p>
                    <ul>
                        <li><strong>init():</strong> Inizializza l'applicazione
                            <ul>
                                <li>Carica header e footer via fetch()</li>
                                <li>Configura la navigazione SPA</li>
                                <li>Carica automaticamente la dashboard all'avvio</li>
                            </ul>
                        </li>
                        <li><strong>setupNavigation():</strong> Intercetta i click sulla navbar
                            <ul>
                                <li>Previene il comportamento di default dei link</li>
                                <li>Chiama loadPage() per caricare il contenuto</li>
                            </ul>
                        </li>
                        <li><strong>loadPage(pageName):</strong> Carica dinamicamente una pagina
                            <ul>
                                <li>Mostra spinner durante il caricamento</li>
                                <li>Fetch del file HTML (es. dashboard.html)</li>
                                <li>Inietta contenuto nel <code>#content-container</code></li>
                                <li>Aggiorna lo stato attivo della navbar</li>
                                <li>Carica gli script necessari per la pagina</li>
                            </ul>
                        </li>
                        <li><strong>loadPageScripts(pageName):</strong> Gestione script dinamici
                            <ul>
                                <li>Mappa delle dipendenze per ogni pagina</li>
                                <li>Dashboard: utils.js + evidenze.js + app.js + verbali-sabes.js</li>
                                <li>Caricamento script solo se non già presenti</li>
                                <li>Inizializza l'app specifica (App.init(), RicercaApp.init(), VerbaliSabesManager.init(), ecc.)</li>
                            </ul>
                        </li>
                        <li><strong>loadScript(src):</strong> Carica uno script JavaScript
                            <ul>
                                <li>Crea dinamicamente tag &lt;script&gt;</li>
                                <li>Gestisce Promise per caricamento asincrono</li>
                                <li>Rimuove script esistenti per evitare duplicati</li>
                            </ul>
                        </li>
                        <li><strong>setActiveNavItem(pageName):</strong> Evidenzia link attivo
                            <ul>
                                <li>Aggiunge classe 'active' al link corrente</li>
                                <li>Rimuove 'active' dagli altri link</li>
                            </ul>
                        </li>
                    </ul>

                    <h5 class="mt-3">Flusso di Navigazione</h5>
                    <pre><code>1. Utente clicca su link navbar (es. "Ricerca Assistiti")
   ↓
2. setupNavigation() intercetta il click
   ↓
3. loadPage('ricerca') viene chiamata
   ↓
4. Mostra spinner nel content-container
   ↓
5. Fetch di ricerca.html
   ↓
6. Inietta HTML nel content-container
   ↓
7. Aggiorna navbar (link "Ricerca" diventa active)
   ↓
8. loadPageScripts('ricerca') carica utils.js e ricerca.js
   ↓
9. initPageApp('ricerca') chiama RicercaApp.init()
   ↓
10. Pagina ricerca è pronta e funzionante</code></pre>

                    <h4 class="mt-4">Funzionalità Comuni (utils.js)</h4>
                    <ul>
                        <li><code>formatDate()</code> - ISO → DD/MM/YYYY</li>
                        <li><code>formatDateTime()</code> - ISO → DD/MM/YYYY HH:MM</li>
                        <li><code>formatCurrency()</code> - Number → 1.234,56 €</li>
                        <li><code>daysFromNow()</code> - Calcolo giorni rimanenti</li>
                        <li><code>getEvidenzaStato()</code> - Determina stato (Scaduta/Corrente/Futura)</li>
                        <li><code>normalizeString()</code> - Lowercase + rimozione accenti</li>
                        <li><code>searchItems()</code> - Ricerca multi-campo</li>
                        <li><code>sortBy()</code> - Ordinamento array</li>
                        <li><code>groupBy()</code> - Raggruppamento</li>
                        <li><code>debounce()</code> - Ottimizzazione ricerche (300ms)</li>
                        <li><code>showToast()</code> - Notifiche Bootstrap</li>
                        <li><code>escapeHtml()</code> - Prevenzione XSS</li>
                        <li><code>loadJSON()</code> - Fetch JSON con error handling</li>
                    </ul>

                    <h4 class="mt-5">Come Lanciare il Sito Statico</h4>
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle"></i> <strong>Importante:</strong> Non aprire direttamente index.html dal filesystem.
                        L'applicazione SPA richiede un web server locale per funzionare correttamente (a causa delle richieste fetch()).
                    </div>

                    <h5>Metodo 1: Python (Semplice e Veloce)</h5>
                    <p>Se hai Python installato (versione 3.x), puoi avviare un server web locale con un solo comando:</p>
                    
                    <div class="card mb-3">
                        <div class="card-body">
                            <h6><i class="bi bi-terminal"></i> Passaggi:</h6>
                            <ol>
                                <li>Apri il <strong>Prompt dei comandi</strong> (Win + R, digita <code>cmd</code> e premi Invio)</li>
                                <li>Naviga nella cartella del progetto:
                                    <pre><code>cd percorso\della\tua\cartella</code></pre>
                                    <small class="text-muted">Sostituisci con il percorso reale dove si trova il progetto</small>
                                </li>
                                <li>Avvia il server web:
                                    <pre><code>python -m http.server 8000</code></pre>
                                </li>
                                <li>Apri il browser e vai all'indirizzo:
                                    <pre><code>http://localhost:8000</code></pre>
                                    Oppure:
                                    <pre><code>http://127.0.0.1:8000</code></pre>
                                </li>
                            </ol>
                            <div class="alert alert-info mb-0">
                                <i class="bi bi-info-circle"></i> <strong>Tip:</strong> Per fermare il server, premi <kbd>Ctrl</kbd> + <kbd>C</kbd> nel terminale.
                            </div>
                        </div>
                    </div>

                    <h5 class="mt-4">Metodo 2: Node.js (con npm)</h5>
                    <p>Se hai Node.js installato, puoi usare il pacchetto <code>http-server</code>:</p>
                    
                    <div class="card mb-3">
                        <div class="card-body">
                            <h6><i class="bi bi-terminal"></i> Passaggi:</h6>
                            <ol>
                                <li>Installa <code>http-server</code> globalmente (se non l'hai già fatto):
                                    <pre><code>npm install -g http-server</code></pre>
                                </li>
                                <li>Naviga nella cartella del progetto e avvia il server:
                                    <pre><code>http-server -p 8000</code></pre>
                                </li>
                                <li>Apri il browser e vai a:
                                    <pre><code>http://localhost:8000</code></pre>
                                </li>
                            </ol>
                            <div class="alert alert-info mb-0">
                                <i class="bi bi-info-circle"></i> <strong>Vantaggi:</strong> <code>http-server</code> offre funzionalità aggiuntive come caching e compressione.
                            </div>
                        </div>
                    </div>

                    <h5 class="mt-4">Metodo 3: Visual Studio Code (Live Server)</h5>
                    <div class="card mb-3">
                        <div class="card-body">
                            <h6><i class="bi bi-code-square"></i> Passaggi:</h6>
                            <ol>
                                <li>Apri il progetto in <strong>Visual Studio Code</strong></li>
                                <li>Installa l'estensione <strong>Live Server</strong> (se non già installata)</li>
                                <li>Click destro su <code>index.html</code> → <strong>Open with Live Server</strong></li>
                                <li>Il browser si aprirà automaticamente con l'applicazione</li>
                            </ol>
                            <div class="alert alert-success mb-0">
                                <i class="bi bi-check-circle"></i> <strong>Hot Reload:</strong> Live Server ricarica automaticamente la pagina quando modifichi i file!
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-light border mt-3">
                        <h6><i class="bi bi-lightbulb"></i> Nota sulla Porta</h6>
                        <p class="mb-0">Se la porta 8000 è già in uso, puoi usare una porta diversa (es. 3000, 5000, 8080). 
                        Ricorda di aggiornare l'URL del browser di conseguenza.</p>
                    </div>
                </section>

                <!-- Modello Dati -->
                <section id="dati" class="mb-5">
                    <h2 class="section-header">Modello Dati</h2>

                    <h4>Entità Principali</h4>

                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="table-light">
                                <tr>
                                    <th>Entità</th>
                                    <th>Campi Principali</th>
                                    <th>File JSON</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Assistito</strong></td>
                                    <td>cf, cognome, nome, dataNascita, luogoNascita, indirizzo, comune, telefono,
                                        email, stato, operatoreRiferimento</td>
                                    <td>assistiti.json</td>
                                </tr>
                                <tr>
                                    <td><strong>Evidenza</strong></td>
                                    <td>id, cf, assistito, idTipoEvidenza, tipoEvidenza, descrizione, dataScadenza,
                                        priorita, stato, note, operatore</td>
                                    <td>evidenze.json</td>
                                </tr>
                                <tr>
                                    <td><strong>Nota</strong></td>
                                    <td>id, cf, assistito, categoria (Residenza/Pagamenti/Degenze/Amministrazione Sostegno/Redditi/Varie), titolo, testo, dataCreazione, operatore,
                                        principale</td>
                                    <td>note.json</td>
                                </tr>
                                <tr>
                                    <td><strong>Verbale SABES</strong></td>
                                    <td>id, cf, cognome, nome, dataNascita, invaliditaCivile{percentuale, statoPrestazione}, cecita{percentuale, statoPrestazione}, sordita{percentuale, statoPrestazione}</td>
                                    <td>verbali_sabes.json</td>
                                </tr>
                                <tr>
                                    <td><strong>Prestazione</strong></td>
                                    <td>id, cf, tipoPrestazione, codice, dataDecorrenza, dataScadenza, importoMensile,
                                        stato, mensilita[]</td>
                                    <td>prestazioni.json</td>
                                </tr>
                                <tr>
                                    <td><strong>Verbale</strong></td>
                                    <td>id, cf, tipo, numero, dataEmissione, dataScadenza, percentuale, commissione,
                                        esito, stato</td>
                                    <td>verbali.json</td>
                                </tr>
                                <tr>
                                    <td><strong>Comunicazione</strong></td>
                                    <td>id, cf, idTipoComunicazione, oggetto, dataGenerazione, dataInvio,
                                        numeroProtocollo, canale, destinatario, stato</td>
                                    <td>comunicazioni.json</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h4 class="mt-4">Stati & Enumerazioni</h4>
                    <ul>
                        <li><strong>Stato Evidenza:</strong> Scaduta (< oggi), Corrente (≤ 30gg), Futura (> 30gg)</li>
                        <li><strong>Priorità:</strong> Alta, Media, Bassa</li>
                        <li><strong>Stato Prestazione:</strong> Concessa, Sospesa, Revocata, Negata</li>
                        <li><strong>Stato Mensilità:</strong> pagato, sospeso, negato, revocato, non-dovuto</li>
                        <li><strong>Stato Comunicazione:</strong> Generata, Caricata, Protocollata, Errore</li>
                        <li><strong>Canale:</strong> PEC, Email, Raccomandata</li>
                    </ul>

                    <h4 class="mt-4">Relazioni</h4>
                    <pre><code>Assistito (1) ──→ (N) Evidenze
          (1) ──→ (N) Note
          (1) ──→ (N) Prestazioni
          (1) ──→ (N) Verbali
          (1) ──→ (N) Comunicazioni

TipoEvidenza (1) ──→ (N) Evidenze
TipoComunicazione (1) ──→ (N) Comunicazioni

Prestazione (1) ──→ (N) Mensilità (embedded array)</code></pre>
                </section>

                <!-- Footer Info -->
                <div class="alert alert-success">
                    <h5><i class="bi bi-check-circle"></i> POC Completo e Funzionale</h5>
                    <p class="mb-0">Tutte le funzionalità descritte sono implementate e testabili aprendo i file HTML
                        tramite web server locale (<code>python -m http.server 8000</code>).</p>
                </div>
            </div>
        </div>
    </div>

<script>
    // Smooth scroll for TOC links
    document.querySelectorAll('.toc a').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    });
</script>
